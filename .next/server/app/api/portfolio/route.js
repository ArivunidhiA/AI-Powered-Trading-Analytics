"use strict";(()=>{var e={};e.id=731,e.ids=[731],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},60923:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>f,originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>d,routeModule:()=>P,serverHooks:()=>y,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>h});var o={};r.r(o),r.d(o,{GET:()=>u,POST:()=>p});var a=r(95419),i=r(69108),n=r(99678),s=r(78070),c=r(42290);let l={totalValue:0,totalPnl:0,totalPnlPercent:0,positions:[{symbol:"AAPL",name:"Apple Inc.",quantity:10,avgPrice:150,currentPrice:0,value:0,pnl:0,pnlPercent:0},{symbol:"TSLA",name:"Tesla Inc.",quantity:5,avgPrice:200,currentPrice:0,value:0,pnl:0,pnlPercent:0},{symbol:"MSFT",name:"Microsoft Corporation",quantity:8,avgPrice:300,currentPrice:0,value:0,pnl:0,pnlPercent:0}],watchlist:["AAPL","TSLA","MSFT","GOOGL","AMZN","NVDA"]};async function u(){try{let e=await Promise.all(l.positions.map(async e=>{try{let t=(await c.Z.quote(e.symbol)).regularMarketPrice||e.avgPrice,r=e.quantity*t,o=r-e.quantity*e.avgPrice,a=o/(e.quantity*e.avgPrice)*100;return{...e,currentPrice:t,value:r,pnl:o,pnlPercent:a}}catch(t){return console.error(`Error fetching price for ${e.symbol}:`,t),e}})),t=e.reduce((e,t)=>e+t.value,0),r=e.reduce((e,t)=>e+t.quantity*t.avgPrice,0),o=t-r,a={...l,positions:e,totalValue:t,totalPnl:o,totalPnlPercent:r>0?o/r*100:0};return s.Z.json({success:!0,data:a})}catch(e){return console.error("Portfolio fetch error:",e),s.Z.json({success:!1,error:"Failed to fetch portfolio data"},{status:500})}}async function p(e){try{let{action:t,symbol:r,quantity:o,price:a}=await e.json();if("add_position"===t){let e={symbol:r.toUpperCase(),name:r,quantity:o||0,avgPrice:a||0,currentPrice:a||0,value:(o||0)*(a||0),pnl:0,pnlPercent:0};l.positions.push(e)}else"add_watchlist"!==t||l.watchlist.includes(r.toUpperCase())||l.watchlist.push(r.toUpperCase());return s.Z.json({success:!0,data:l})}catch(e){return console.error("Portfolio update error:",e),s.Z.json({success:!1,error:"Failed to update portfolio"},{status:500})}}let P=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/portfolio/route",pathname:"/api/portfolio",filename:"route",bundlePath:"app/api/portfolio/route"},resolvedPagePath:"/Users/ariv07/Desktop/RESUME - 09 APRIL/Projects/citadel/Market AI/app/api/portfolio/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:v,serverHooks:y,headerHooks:f,staticGenerationBailout:h}=P,m="/api/portfolio/route";function g(){return(0,n.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:v})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,206,290],()=>r(60923));module.exports=o})();