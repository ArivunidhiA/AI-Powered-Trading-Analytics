"use strict";(()=>{var e={};e.id=926,e.ids=[926],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},36040:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>v,originalPathname:()=>w,patchFetch:()=>k,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>m});var n={};r.r(n),r.d(n,{GET:()=>h});var a=r(95419),o=r(69108),i=r(99678),l=r(78070),s=r(42290);function u(e){if(e.length<2)return 0;let t=e.reduce((e,t)=>e+t,0)/e.length;return Math.sqrt(e.reduce((e,r)=>e+Math.pow(r-t,2),0)/(e.length-1))*Math.sqrt(252)}function c(e,t=.95){if(0===e.length)return 0;let r=[...e].sort((e,t)=>e-t),n=Math.floor((1-t)*r.length);return r[n]||0}async function h(e){try{let{searchParams:t}=new URL(e.url),r=t.get("symbol")||"AAPL",n=t.get("benchmark")||"^GSPC",a=await s.Z.historical(r,{period1:new Date(Date.now()-31536e6),period2:new Date,interval:"1d"}),o=await s.Z.historical(n,{period1:new Date(Date.now()-31536e6),period2:new Date,interval:"1d"});if(0===a.length)throw Error("No historical data available for the asset");let i=a.map(e=>e.close).reverse(),h=[];for(let e=1;e<i.length;e++)h.push((i[e]-i[e-1])/i[e-1]);let p=[];if(o.length>0){let e=o.map(e=>e.close).reverse();for(let t=1;t<e.length;t++)p.push((e[t]-e[t-1])/e[t-1])}let d=u(h),g=function(e,t=.02){if(e.length<2)return 0;let r=e.reduce((e,t)=>e+t,0)/e.length,n=u(e);return 0===n?0:(252*r-t)/n}(h),f=function(e){if(e.length<2)return 0;let t=e[0],r=0;for(let n=1;n<e.length;n++)e[n]>t?t=e[n]:r=Math.max(r,(t-e[n])/t);return r}(i),v=p.length>0?function(e,t){if(e.length!==t.length||e.length<2)return 1;let r=e.reduce((e,t)=>e+t,0)/e.length,n=t.reduce((e,t)=>e+t,0)/t.length,a=0,o=0;for(let i=0;i<e.length;i++){let l=e[i]-r,s=t[i]-n;a+=l*s,o+=s*s}return 0===o?1:a/o}(h,p):1,m=c(h,.95),w=function(e,t=.95){let r=c(e,t),n=e.filter(e=>e<=r);return 0===n.length?r:n.reduce((e,t)=>e+t,0)/n.length}(h,.95);return l.Z.json({success:!0,data:{volatility:100*d,sharpeRatio:g,maxDrawdown:100*f,beta:v,var95:100*m,cvar95:100*w}})}catch(e){return console.error("Risk metrics calculation error:",e),l.Z.json({success:!1,error:"Failed to calculate risk metrics"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/risk/route",pathname:"/api/risk",filename:"route",bundlePath:"app/api/risk/route"},resolvedPagePath:"/Users/ariv07/Desktop/RESUME - 09 APRIL/Projects/citadel/Market AI/app/api/risk/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:f,headerHooks:v,staticGenerationBailout:m}=p,w="/api/risk/route";function k(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,206,290],()=>r(36040));module.exports=n})();