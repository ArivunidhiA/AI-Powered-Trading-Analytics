"use strict";(()=>{var e={};e.id=484,e.ids=[484],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},58916:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>v,originalPathname:()=>S,patchFetch:()=>b,requestAsyncStorage:()=>g,routeModule:()=>h,serverHooks:()=>p,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var i={};r.r(i),r.d(i,{GET:()=>c});var n=r(95419),a=r(69108),s=r(99678),o=r(78070),l=r(42290);function u(e,t){if(0===e.length)return 0;if(1===e.length)return e[0];let r=2/(t+1),i=e[0];for(let t=1;t<e.length;t++)i=e[t]*r+i*(1-r);return i}function d(e,t){return e.length<t?e[e.length-1]||0:e.slice(-t).reduce((e,t)=>e+t,0)/t}async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("symbol")||"AAPL",i=await l.Z.historical(r,{period1:new Date(Date.now()-5184e6),period2:new Date,interval:"1d"});if(0===i.length)throw Error("No historical data available");let n=i.map(e=>e.close).reverse(),a=n[n.length-1],s=function(e,t=14){if(e.length<t+1)return 50;let r=0,i=0;for(let n=1;n<=t;n++){let t=e[n]-e[n-1];t>0?r+=t:i-=t}let n=r/t,a=i/t;return 0===a?100:100-100/(1+n/a)}(n),c=function(e){let t=u(e,12)-u(e,26),r=u([t],9),i=t-r;return{macd:t,signal:r,histogram:i}}(n),h=d(n,20),g=d(n,50),m=[{name:"RSI",value:s,signal:s<30?"bullish":s>70?"bearish":"neutral",description:`RSI: ${s.toFixed(2)} - ${s<30?"Oversold":s>70?"Overbought":"Neutral"}`},{name:"MACD",value:c.macd,signal:c.histogram>0?"bullish":"bearish",description:`MACD: ${c.macd.toFixed(4)}, Signal: ${c.signal.toFixed(4)}`},{name:"SMA20",value:h,signal:a>h?"bullish":"bearish",description:`20-day SMA: $${h.toFixed(2)}`},{name:"SMA50",value:g,signal:a>g?"bullish":"bearish",description:`50-day SMA: $${g.toFixed(2)}`}],p=function(e,t){let r=t.find(e=>"RSI"===e.name),i=t.find(e=>"MACD"===e.name),n=t.find(e=>"SMA20"===e.name),a=t.find(e=>"SMA50"===e.name),s="HOLD",o=.5,l="";if(r&&i&&n&&a){let e=0,t=0;r.value<30?(e++,l+="RSI indicates oversold conditions. "):r.value>70&&(t++,l+="RSI indicates overbought conditions. "),"bullish"===i.signal?(e++,l+="MACD shows bullish momentum. "):"bearish"===i.signal&&(t++,l+="MACD shows bearish momentum. "),n.value>a.value?(e++,l+="Short-term trend is above long-term trend. "):(t++,l+="Short-term trend is below long-term trend. "),e>t?(s="BUY",o=Math.min(.9,.5+(e-t)*.1)):t>e?(s="SELL",o=Math.min(.9,.5+(t-e)*.1)):(s="HOLD",o=.5),""===l&&(l="Mixed signals from technical indicators.")}return{symbol:e,recommendation:s,confidence:o,reasoning:l,technicalIndicators:t,timestamp:new Date().toISOString()}}(r,m);return o.Z.json({success:!0,data:p})}catch(e){return console.error("Signals fetch error:",e),o.Z.json({success:!1,error:"Failed to generate trading signals"},{status:500})}}let h=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/signals/route",pathname:"/api/signals",filename:"route",bundlePath:"app/api/signals/route"},resolvedPagePath:"/Users/ariv07/Desktop/RESUME - 09 APRIL/Projects/citadel/Market AI/app/api/signals/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:p,headerHooks:v,staticGenerationBailout:f}=h,S="/api/signals/route";function b(){return(0,s.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[638,206,290],()=>r(58916));module.exports=i})();